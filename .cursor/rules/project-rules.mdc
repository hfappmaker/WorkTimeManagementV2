---
description: 
globs: 
alwaysApply: true
---
---
description: 
globs: 
alwaysApply: true
---
# WorkTimeManagementV2 プロジェクトルール

## 1. 開発環境
- Node.js 18以上を使用
- Yarnをパッケージマネージャーとして使用
- Cursorを推奨エディタとして使用
- DevContainerを使用した開発環境の統一

## 2. コード規約
### 2.1 ファイル構成
- コンポーネントは `components/` ディレクトリに配置
  - 原則ドメイン領域毎にディレクトリを区切る(例: 契約に関するものなら `components/contract/` ディレクトリに配置)
  - 汎用的なコンポーネント(ボタン、フォーム、ダイアログ等)は `components/shared/` ディレクトリに配置
- ページコンポーネントは `app/` ディレクトリに配置
- 型定義は `types/` ディレクトリに配置
  - 汎用的な型定義は `types/shared/` ディレクトリに配置
- サーバーアクションは `actions/` ディレクトリに配置
- データストアに関するコードは `data/` ディレクトリに配置
- ユーティリティ関数は `lib/` ディレクトリに配置

### 2.2 命名規則
- ディレクトリ名: kebab-case (例: `user-info/`)
- コンポーネントファイル: PascalCase (例: `UserProfile.tsx`)
  - デフォルトエクスポートでもコンポーネントに名前をつける
  - 複数のステートレスや単純なコンポーネントは1つのファイルにまとめることを許容
- ユーティリティファイル: camelCase (例: `formatDate.ts`)
- 型定義: PascalCase (例: `UserType.ts`)
- 定数: UPPER_SNAKE_CASE
- 変数・関数: camelCase
  - 短く、直感的で、説明的な名前をつける（S-I-D原則）
  - 単語の収縮は避ける
  - 文脈の順序は変数の意味に影響する
  - 関数名の動詞部分は以下のような対の動詞を使用
    - get/set
    - remove/add
    - delete/create
    - handle（イベントハンドラ）
  - 単数形と複数形は使い分ける
  - プレフィックスは変数の意味を強調する場合のみ使用

### 2.3 コーディング規約
- TypeScriptの厳格モードを使用
- ESLintとPrettierの設定に従う
- コンポーネントは可能な限り関数コンポーネントを使用
- Props型は明示的に定義する
- 原則anyを許容しない
  - ライブラリを使用していて、やむを得ない場合に関してはanyを許容
  - anyを使用する場合はコメントにて補足すること
- asを使った型アサーションは原則使用しないこと
- CSSは原則書かないこと（TailwindCSS側で用意されているクラス名で対応すること）
- 汎用性のあるものはtailwind.configに定義すること
- 改行に<br />は使用しないこと
- 環境変数は `.env` ファイルで管理
- Prismaのランタイムライブラリはimportしない (例: import { Decimal } from "@prisma/client/runtime/library")

## 3. Git運用ルール
### 3.1 ブランチ戦略
- main: 本番環境用ブランチ
- develop: 開発用ブランチ
- feature/*: 機能開発用ブランチ
- hotfix/*: 緊急バグ修正用ブランチ

### 3.2 コミットメッセージ
- feat: 新機能
- fix: バグ修正
- docs: ドキュメントのみの変更
- style: コードの意味に影響しない変更（空白、フォーマット等）
- refactor: リファクタリング
- test: テストコードの追加・修正
- chore: ビルドプロセスやツールの変更

### 3.3 プルリクエスト
- レビュー必須
- テストの通過を確認
- コンフリクトの解消を確認
- 適切な説明とスクリーンショットの添付

## 4. セキュリティ
- 環境変数は必ず `.env` ファイルで管理
- 機密情報はGitにコミットしない
- 認証情報は適切に暗号化して保存
- セキュリティアップデートは優先的に対応

## 5. パフォーマンス
- 画像の最適化
- コード分割の活用
- 不要なレンダリングの防止
- バンドルサイズの最適化

## 6. テスト
- 1関数に1テストケースは原則書くこと
- 要素を取得する際に、Tailwindクラスを使用して取得しないこと
- コンポーネントのテストは可能な限り実装
- E2Eテストは重要なユーザーフローに対して実装

## 7. デプロイ
- 本番環境へのデプロイは承認プロセスを経る
- デプロイ前にテストを実行
- ロールバック手順を用意

## 8. ドキュメント
- READMEの更新を忘れない
- API仕様書の更新
- 重要な変更はCHANGELOGに記載
- コメントは必要に応じて追加
